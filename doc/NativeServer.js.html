<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: NativeServer/NativeServer.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: NativeServer/NativeServer.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @classdesc
 * NativeServer
 * 
 * @class NativeServer
 * @this {KatrinTankViewer.NativeServer}
 * @author sogimu@nxt.ru Aleksandr Lizin aka sogimu
 * @version 0.1
 *
 * @requires KatrinTankViewer.js
 * @requires NativeServer/HotSpotInfo/HotSpotInfo.js
 */

(function(namespace) {
    var NativeServer = function(O) {

        var me = {};

        me._serverURL = "http://localhost/develop/katrinTankViewer/";
        me._pathToModel = "data/MS.js";
        me._pathToHotSpotsInfo = "data/hotSpots.json";

        me._hotSpotsInfo = {};
        me._model = {};

        me._setServerURL = function(url) {
            gizmo.Filter(url, "string");
            this._serverURL = url;
        };

        me._getServerURL = function() {
            return this._serverURL;
        };

        me._setPathToModel = function(path) {
            gizmo.Filter(path, "string");
            this._pathToModel = path;
        };

        me._getPathToModel = function() {
            return this._pathToModel;
        };
        
        me._setPathToHotSpotsInfo = function(path) {
            gizmo.Filter(path, "string");
            this._pathToHotSpotsInfo = path;
        };

        me._getPathToHotSpotsInfo = function() {
            return this._pathToHotSpotsInfo;
        };

        me._setHotSpotsInfo = function(hotSpotsInfo) {
            gizmo.Filter(hotSpotsInfo, "Object");
            this._hotSpotsInfo = hotSpotsInfo;
        };

        me._getHotSpotsInfo = function() {
            return this._hotSpotsInfo;
        };

        me._setModel = function(model) {
            gizmo.Filter(model, "Object");
            this._model = model;
        };

        me._getModel = function() {
            return this._model;
        };

        me._sendRequestToServer = function(pathToFile, callback) {
            $.getJSON(this._serverURL + "/" + pathToFile, callback)
        };

        /**
         * Get object with information about number hot spots: name of chanell, position on model, ID of VRML point
         *
         * @method NativeServer.GetHotSpotsInfo
         * @param {boolean}   needUpdate   if true - information about hot spots in this class will be update
         * @param {Function}  callback     function which start when data had been get
         */
        me.GetHotSpotsInfo = function(needUpdate, callback) {
            if(needUpdate) {
                var self = this;
                this._sendRequestToServer(this._pathToHotSpotsInfo, function(data) {
                    self._setHotSpotsInfo(hotSpotsInfo);    
                    callback(data);
                });

            } else {
                callback(this._getHotSpotsInfo());
            }

        };

        /**
         * Get model
         *
         * @method NativeServer.GetModel
         * @param {boolean}   needUpdate   if true - information about hot spots in this class will be update
         * @param {Function}  callback     function which start when data had been get
         */
        me.GetModel = function(needUpdate, callback) {
            if(needUpdate) {
                var self = this;
                this._sendRequestToServer(this._pathToModel, function(data) {
                    self._setModel(model);
                    callback(data);
                });

            } else {
                callback(this._getModel());
            }
        };

        /**
        * Constructor
        *
        * @method NativeServer.Constructor
        * @this {KatrinTankViewer.NativeServer}
        * @param {Object} O
        * @param {string} O.serverURL           URL to the server, for example http://localhost/develop/katrinTankViewer/
        * @param {string} O.pathToModel         path to model, for example data/MS.js
        * @param {string} O.pathToHotSpotsInfo  path to hot spot's information, for example data/hotSpots.json
        */
        me.Constructor = function(O) {
            if(O) {
                switch(O) {
                    case O.serverURL : {
                        gizmo.Filter(O.serverURL, "string");
                        this._setServerURL(O.serverURL);
                    };break;

                    case O.pathToModel : {
                        gizmo.Filter(O.pathToModel, "string");
                        this._setPathToModel(O.pathToModel);
                    };break;

                    case O.pathToHotSpotsInfo : {
                        gizmo.Filter(O.pathToHotSpotsInfo, "string");
                        this._setPathToHotSpotsInfo(O.pathToHotSpotsInfo);
                    };break;
                };    
            };

            this.GetHotSpotsInfo(true, function(data) {
                // console.log(data);
            });
            this.GetModel(true, function(data) {
                // console.log(data);
            });
            
        };

        me.Constructor(O);

        return me;

    };
    
    namespace.NativeServer = NativeServer;

})(window.KTV);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="AdeiServer.html">AdeiServer</a></li><li><a href="ChanellValues.html">ChanellValues</a></li><li><a href="HotSpotInfo.html">HotSpotInfo</a></li><li><a href="KatrinTankViewer.html">KatrinTankViewer</a></li><li><a href="NativeServer.html">NativeServer</a></li><li><a href="Sys.html">Sys</a></li><li><a href="Viewer.html">Viewer</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Thu Mar 06 2014 11:20:46 GMT+0700 (NOVT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
